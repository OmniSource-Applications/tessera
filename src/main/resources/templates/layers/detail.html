<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<th:block th:fragment="content">

    <!-- Breadcrumb -->
    <nav class="mb-6 text-sm text-muted">
        <a th:href="@{/workspaces}" class="hover:text-foreground transition-colors">Workspaces</a>
        <span class="mx-1.5">/</span>
        <a th:href="@{/workspaces/{ws}(ws=${workspace})}"
           th:text="${workspace}" class="hover:text-foreground transition-colors">ws</a>
        <span class="mx-1.5">/</span>
        <a th:href="@{/workspaces/{ws}/datastores/{ds}(ws=${workspace}, ds=${datastore})}"
           th:text="${datastore}" class="hover:text-foreground transition-colors">ds</a>
        <span class="mx-1.5">/</span>
        <a th:href="@{/workspaces/{ws}/datastores/{ds}/layers(ws=${workspace}, ds=${datastore})}"
           class="hover:text-foreground transition-colors">Layers</a>
        <span class="mx-1.5">/</span>
        <span class="text-foreground font-medium" th:text="${layer.layer().layer()}">layer</span>
    </nav>

    <!-- Status -->
    <div class="mb-6 flex items-center gap-3">
    <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-medium"
          th:classappend="${layer.status() == 'ACTIVE'} ? 'bg-success/10 text-success' : 'bg-danger/10 text-danger'"
          th:text="${layer.status()}">ACTIVE</span>
        <span class="text-sm text-muted">
      Source:
      <span class="text-foreground" th:text="${layer.sourceSchema() + '.' + layer.sourceTable()}">public.table</span>
    </span>
    </div>

    <!-- Metadata cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">

        <div class="bg-surface border border-border rounded-xl p-5">
            <p class="text-xs font-medium text-muted uppercase tracking-wide">Geometry Type</p>
            <p class="mt-1 text-lg font-semibold text-foreground" th:text="${layer.geometryType()}">POINT</p>
        </div>

        <div class="bg-surface border border-border rounded-xl p-5">
            <p class="text-xs font-medium text-muted uppercase tracking-wide">Geometry Column</p>
            <p class="mt-1 text-lg font-semibold text-foreground" th:text="${layer.geometryColumn()}">geom</p>
        </div>

        <div class="bg-surface border border-border rounded-xl p-5">
            <p class="text-xs font-medium text-muted uppercase tracking-wide">SRID</p>
            <p class="mt-1 text-lg font-semibold text-foreground" th:text="${layer.srid()}">4326</p>
        </div>

        <div class="bg-surface border border-border rounded-xl p-5">
            <p class="text-xs font-medium text-muted uppercase tracking-wide">Row Count</p>
            <p class="mt-1 text-lg font-semibold text-foreground"
               th:text="${layer.rowCount() >= 0} ? ${#numbers.formatInteger(layer.rowCount(), 1, 'COMMA')} : 'â€”'">0</p>
        </div>

        <div class="bg-surface border border-border rounded-xl p-5 sm:col-span-2" th:if="${layer.extent() != null}">
            <p class="text-xs font-medium text-muted uppercase tracking-wide">Extent (Bounding Box)</p>
            <div class="mt-2 grid grid-cols-2 gap-x-6 gap-y-1 text-sm">
                <div>
                    <span class="text-muted">Min X:</span>
                    <span class="text-foreground ml-1" th:text="${#numbers.formatDecimal(layer.extent()[0], 1, 6)}">0</span>
                </div>
                <div>
                    <span class="text-muted">Max X:</span>
                    <span class="text-foreground ml-1" th:text="${#numbers.formatDecimal(layer.extent()[2], 1, 6)}">0</span>
                </div>
                <div>
                    <span class="text-muted">Min Y:</span>
                    <span class="text-foreground ml-1" th:text="${#numbers.formatDecimal(layer.extent()[1], 1, 6)}">0</span>
                </div>
                <div>
                    <span class="text-muted">Max Y:</span>
                    <span class="text-foreground ml-1" th:text="${#numbers.formatDecimal(layer.extent()[3], 1, 6)}">0</span>
                </div>
            </div>
        </div>

    </div>

    <!-- Placeholder for future: preview map, attribute schema, style config -->
    <div class="bg-surface border border-border rounded-xl p-6">
        <h2 class="text-lg font-semibold text-foreground mb-2">Preview</h2>
        <div class="py-8 text-center">
            <svg class="mx-auto h-10 w-10 text-muted mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"/>
            </svg>
            <p class="text-sm text-muted">Map preview and attribute schema coming soon.</p>
        </div>
    </div>

</th:block>

</body>
</html>