<!DOCTYPE html>
<!--
  layout/page.html — The authenticated page shell.

  Controllers return THIS template and pass model attributes:
    - "title"       → page title (required)
    - "view"        → template name with a th:fragment="content" (required)
    - "description" → subtitle under the page header (optional)

  Example:

    @GetMapping("/")
    String home(Model model) {
        model.addAttribute("title", "Dashboard");
        model.addAttribute("description", "Overview of indexed data sources.");
        model.addAttribute("view", "home");
        return "layout/page";
    }
-->
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/head :: head(title=${title})}"></head>
<body class="bg-background text-foreground min-h-screen antialiased">

<!-- Sidebar -->
<aside th:replace="~{layout/sidebar :: sidebar}"></aside>

<!-- Mobile overlay -->
<div id="sidebar-overlay" class="hidden fixed inset-0 z-30 bg-overlay lg:hidden"></div>

<!-- Main wrapper — shifts right when sidebar is open on desktop -->
<div id="main-wrapper" class="min-h-screen flex flex-col transition-[padding] duration-200 lg:pl-64">

    <!-- Top bar with hamburger -->
    <header th:replace="~{layout/topbar :: topbar}"></header>

    <!-- Page header (only renders if description is set) -->
    <header th:if="${description != null}"
            th:replace="~{layout/header :: header(title=${title}, description=${description})}"></header>

    <!-- Page content — injected from the view template -->
    <main class="flex-1 w-full mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <th:block th:replace="~{${view} :: content}"></th:block>
    </main>

    <!-- Footer -->
    <footer th:replace="~{layout/footer :: footer}"></footer>

</div>

<!-- Sidebar & theme JS -->
<script th:src="@{/js/layout.js}"></script>

</body>
</html>